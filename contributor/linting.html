<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Linting &#8212; Bioconda  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=39de963d" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css?v=48720263" />
    <link rel="stylesheet" type="text/css" href="../_static/font-awesome-4.7.0/css/font-awesome.min.css?v=02f538dc" />
    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/vega.min.js?v=d54ef115"></script>
    <script src="../_static/vega-lite.min.js?v=4fab2bf4"></script>
    <script src="../_static/vega-embed.min.js?v=2f6bc6e4"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Updating recipes" href="updating.html" />
    <link rel="prev" title="Guidelines for bioconda recipes" href="guidelines.html" />
    <link href="https://fonts.googleapis.com/css?family=Lato|Raleway" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@700&display=swap" rel="stylesheet">


    <link rel="apple-touch-icon" sizes="57x57" href="../_static/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="../_static/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../_static/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../_static/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../_static/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../_static/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="../_static/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../_static/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../_static/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="../_static/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../_static/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../_static/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../_static/favicon-16x16.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="../_static/ms-icon-144x144.png">

    <link rel="manifest" href="../_static/manifest.json">
    <meta name="theme-color" content="#ffffff">

   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  


  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="linting">
<h1>Linting<a class="headerlink" href="#linting" title="Link to this heading">¶</a></h1>
<p>In order to ensure high-quality packages, we now perform routine
checks on each recipe (called <a class="reference external" href="http://stackoverflow.com/questions/8503559/what-is-linting">linting</a>).</p>
<p>Linting is executed as a GitHub Check on all PRs and as a guarding
stage on all builds. It can also be executed locally using the
<code class="docutils literal notranslate"><span class="pre">bioconda-utils</span> <span class="pre">lint</span></code> commeand.</p>
<section id="skipping-a-lint-check">
<h2>Skipping a lint check<a class="headerlink" href="#skipping-a-lint-check" title="Link to this heading">¶</a></h2>
<p>The linter may occasionally create false positives. Lint checks can
therefore be disabled individually if there is good reason to do so.</p>
<section id="skipping-persistently-on-a-per-recipe-basis">
<h3>Skipping persistently on a per-recipe basis<a class="headerlink" href="#skipping-persistently-on-a-per-recipe-basis" title="Link to this heading">¶</a></h3>
<p>Recipes may contain a section listing lint checks to be disabled:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">extra</span><span class="p">:</span>
  <span class="n">skip</span><span class="o">-</span><span class="n">lints</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">uses_setuptools</span>  <span class="c1"># uses pkg_resoures during run time</span>
</pre></div>
</div>
<p>For example, <code class="xref any docutils literal notranslate"><span class="pre">uses_setuptools</span></code> will trigger if a recipe
requires <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> in its <code class="docutils literal notranslate"><span class="pre">run</span></code> section. While the vast
majority of tools only need <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> during installation, there
are some exceptions to this rule. A tool accessing the
<code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code> module which is part of setuptools actually does
need <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> present during run time. In this case, add skip as
shown above and add a comment describing why the recipe needs to
ignore that particular lint check.</p>
</section>
<section id="skipping-on-a-per-commit-basis">
<h3>Skipping on a per-commit basis<a class="headerlink" href="#skipping-on-a-per-commit-basis" title="Link to this heading">¶</a></h3>
<p>While only recommended in very special cases, it is possible to skip
specific linting tests on a commit by using special text in the commit
message, <code class="docutils literal notranslate"><span class="pre">[lint</span> <span class="pre">skip</span> <span class="pre">$FUNCTION</span> <span class="pre">for</span> <span class="pre">$RECIPE]</span></code> where <code class="docutils literal notranslate"><span class="pre">$FUNCTION</span></code> is
the name of the function to skip and <code class="docutils literal notranslate"><span class="pre">$RECIPE</span></code> is the path to the
recipe directory for which this test should be skipped.</p>
<p>For example, if the linter reports a <code class="docutils literal notranslate"><span class="pre">uses_setuptools</span></code> issue for
<code class="docutils literal notranslate"><span class="pre">recipes/mypackage</span></code>, but you are certain the package really needs
setuptools, you can add <code class="docutils literal notranslate"><span class="pre">[lint</span> <span class="pre">skip</span> <span class="pre">uses_setuptools</span> <span class="pre">for</span>
<span class="pre">recipes/mypackage]</span></code> to the commit message and this linting test will
be skipped on CircleCI.  Multiple tests can be skipped by adding
additional special text. For example, <code class="docutils literal notranslate"><span class="pre">[lint</span> <span class="pre">skip</span> <span class="pre">uses_setuptools</span> <span class="pre">for</span>
<span class="pre">recipes/pkg1]</span> <span class="pre">[lint</span> <span class="pre">skip</span> <span class="pre">in_other_channels</span> <span class="pre">for</span>
<span class="pre">recipes/pkg2/0.3.5]</span></code>. Note in the latter case that the second recipe
has a subdirectory for an older version.</p>
<p>Technically we check for the regular expression <code class="docutils literal notranslate"><span class="pre">\[\s*lint</span> <span class="pre">skip</span>
<span class="pre">(?P&lt;func&gt;\w+)</span> <span class="pre">for</span> <span class="pre">(?P&lt;recipe&gt;.*?)\s*\]</span></code> in the commit message of the
HEAD commit. However, often we want to test changes locally without
committing.  When running locally for testing, you can add the same
special text to a temporary environment variable
<span class="target" id="index-0"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">LINT_SKIP</span></code>. The same example above could be tested locally
like this without having to make a commit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LINT_SKIP</span><span class="o">=</span><span class="s2">&quot;[lint skip uses_setuptools for recipes/mypackage]&quot;</span> <span class="n">circleci</span> <span class="n">build</span>
</pre></div>
</div>
</section>
</section>
<section id="lint-checks">
<h2>Lint Checks<a class="headerlink" href="#lint-checks" title="Link to this heading">¶</a></h2>
<p>Below, each lint check executed is shown and described. Lints are
grouped into a few sections, depending on what type of issue they aim
at preventing.</p>
<nav class="contents local" id="index-of-all-lints-checks-by-section">
<p class="topic-title">Index of all Lints Checks by Section:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#incomplete-recipe" id="id2">Incomplete Recipe</a></p>
<ul>
<li><p><a class="reference internal" href="#missing-home" id="id3">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_home</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#missing-summary" id="id4">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_summary</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#missing-license" id="id5">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_license</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#missing-tests" id="id6">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_tests</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#missing-hash" id="id7">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_hash</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#missing-version-or-name" id="id8">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_version_or_name</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#empty-meta-yaml" id="id9">“<code class="xref py py-class docutils literal notranslate"><span class="pre">empty_meta_yaml</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#missing-meta-yaml" id="id10">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_meta_yaml</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#missing-build" id="id11">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_build</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#missing-build-number" id="id12">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_build_number</span></code>”</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#noarch-or-not-noarch" id="id13">Noarch or not noarch</a></p>
<ul>
<li><p><a class="reference internal" href="#should-be-noarch-python" id="id14">“<code class="xref py py-class docutils literal notranslate"><span class="pre">should_be_noarch_python</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#should-be-noarch-generic" id="id15">“<code class="xref py py-class docutils literal notranslate"><span class="pre">should_be_noarch_generic</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#should-not-be-noarch-compiler" id="id16">“<code class="xref py py-class docutils literal notranslate"><span class="pre">should_not_be_noarch_compiler</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#should-not-be-noarch-source" id="id17">“<code class="xref py py-class docutils literal notranslate"><span class="pre">should_not_be_noarch_source</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#should-not-be-noarch-skip" id="id18">“<code class="xref py py-class docutils literal notranslate"><span class="pre">should_not_be_noarch_skip</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#should-not-use-skip-python" id="id19">“<code class="xref py py-class docutils literal notranslate"><span class="pre">should_not_use_skip_python</span></code>”</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#policy" id="id20">Policy</a></p>
<ul>
<li><p><a class="reference internal" href="#uses-vcs-url" id="id21">“<code class="xref py py-class docutils literal notranslate"><span class="pre">uses_vcs_url</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#folder-and-package-name-must-match" id="id22">“<code class="xref py py-class docutils literal notranslate"><span class="pre">folder_and_package_name_must_match</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#gpl-requires-license-distributed" id="id23">“<code class="xref py py-class docutils literal notranslate"><span class="pre">gpl_requires_license_distributed</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#should-not-use-fn" id="id24">“<code class="xref py py-class docutils literal notranslate"><span class="pre">should_not_use_fn</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#has-windows-bat-file" id="id25">“<code class="xref py py-class docutils literal notranslate"><span class="pre">has_windows_bat_file</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#long-summary" id="id26">“<code class="xref py py-class docutils literal notranslate"><span class="pre">long_summary</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#cran-packages-to-conda-forge" id="id27">“<code class="xref py py-class docutils literal notranslate"><span class="pre">cran_packages_to_conda_forge</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#version-starts-with-v" id="id28">“<code class="xref py py-class docutils literal notranslate"><span class="pre">version_starts_with_v</span></code>”</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#syntax" id="id29">Syntax</a></p>
<ul>
<li><p><a class="reference internal" href="#extra-identifiers-not-list" id="id30">“<code class="xref py py-class docutils literal notranslate"><span class="pre">extra_identifiers_not_list</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#extra-identifiers-not-string" id="id31">“<code class="xref py py-class docutils literal notranslate"><span class="pre">extra_identifiers_not_string</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#extra-identifiers-missing-colon" id="id32">“<code class="xref py py-class docutils literal notranslate"><span class="pre">extra_identifiers_missing_colon</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#extra-skip-lints-not-list" id="id33">“<code class="xref py py-class docutils literal notranslate"><span class="pre">extra_skip_lints_not_list</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#version-constraints-missing-whitespace" id="id34">“<code class="xref py py-class docutils literal notranslate"><span class="pre">version_constraints_missing_whitespace</span></code>”</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#recipe-parsing" id="id35">Recipe Parsing</a></p>
<ul>
<li><p><a class="reference internal" href="#duplicate-key-in-meta-yaml" id="id36">“<code class="xref py py-class docutils literal notranslate"><span class="pre">duplicate_key_in_meta_yaml</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#unknown-selector" id="id37">“<code class="xref py py-class docutils literal notranslate"><span class="pre">unknown_selector</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#conda-render-failure" id="id38">“<code class="xref py py-class docutils literal notranslate"><span class="pre">conda_render_failure</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#jinja-render-failure" id="id39">“<code class="xref py py-class docutils literal notranslate"><span class="pre">jinja_render_failure</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#unknown-check" id="id40">“<code class="xref py py-class docutils literal notranslate"><span class="pre">unknown_check</span></code>”</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#repository" id="id41">Repository</a></p>
<ul>
<li><p><a class="reference internal" href="#in-other-channels" id="id42">“<code class="xref py py-class docutils literal notranslate"><span class="pre">in_other_channels</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#build-number-needs-bump" id="id43">“<code class="xref py py-class docutils literal notranslate"><span class="pre">build_number_needs_bump</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#build-number-needs-reset" id="id44">“<code class="xref py py-class docutils literal notranslate"><span class="pre">build_number_needs_reset</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#recipe-is-blacklisted" id="id45">“<code class="xref py py-class docutils literal notranslate"><span class="pre">recipe_is_blacklisted</span></code>”</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#deprecations" id="id46">Deprecations</a></p>
<ul>
<li><p><a class="reference internal" href="#uses-perl-threaded" id="id47">“<code class="xref py py-class docutils literal notranslate"><span class="pre">uses_perl_threaded</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#uses-javajdk" id="id48">“<code class="xref py py-class docutils literal notranslate"><span class="pre">uses_javajdk</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#deprecated-numpy-spec" id="id49">“<code class="xref py py-class docutils literal notranslate"><span class="pre">deprecated_numpy_spec</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#uses-matplotlib" id="id50">“<code class="xref py py-class docutils literal notranslate"><span class="pre">uses_matplotlib</span></code>”</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#build-helpers" id="id51">Build helpers</a></p>
<ul>
<li><p><a class="reference internal" href="#missing-run-exports" id="id52">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_run_exports</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#should-use-compilers" id="id53">“<code class="xref py py-class docutils literal notranslate"><span class="pre">should_use_compilers</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#uses-setuptools" id="id54">“<code class="xref py py-class docutils literal notranslate"><span class="pre">uses_setuptools</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#setup-py-install-args" id="id55">“<code class="xref py py-class docutils literal notranslate"><span class="pre">setup_py_install_args</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#compilers-must-be-in-build" id="id56">“<code class="xref py py-class docutils literal notranslate"><span class="pre">compilers_must_be_in_build</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#cython-must-be-in-host" id="id57">“<code class="xref py py-class docutils literal notranslate"><span class="pre">cython_must_be_in_host</span></code>”</a></p></li>
<li><p><a class="reference internal" href="#cython-needs-compiler" id="id58">“<code class="xref py py-class docutils literal notranslate"><span class="pre">cython_needs_compiler</span></code>”</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#linter-errors" id="id59">Linter Errors</a></p>
<ul>
<li><p><a class="reference internal" href="#linter-failure" id="id60">“<code class="xref py py-class docutils literal notranslate"><span class="pre">linter_failure</span></code>”</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="incomplete-recipe">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">Incomplete Recipe</a><a class="headerlink" href="#incomplete-recipe" title="Link to this heading">¶</a></h3>
<p>These are basic checks, making sure that the recipe is not missing
anything essential.</p>
<section id="missing-home">
<h4><a class="toc-backref" href="#id3" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_home</span></code>”</a><a class="headerlink" href="#missing-home" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe is missing a homepage URL</p>
<p>Please add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">about</span><span class="p">:</span>
   <span class="n">home</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">URL</span> <span class="n">to</span> <span class="n">homepage</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p><p>We want to make sure users can get additional information about a
package, and it saves a separate search for the tool. Furthermore
some tools with name collisions have to be renamed to fit into the
conda channel and the homepage is an unambiguous original source.</p>
</p>
</section>
<section id="missing-summary">
<h4><a class="toc-backref" href="#id4" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_summary</span></code>”</a><a class="headerlink" href="#missing-summary" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe is missing a summary</p>
<p>Please add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">about</span><span class="p">:</span>
  <span class="n">summary</span><span class="p">:</span> <span class="n">One</span> <span class="n">line</span> <span class="n">briefly</span> <span class="n">describing</span> <span class="n">package</span>
</pre></div>
</div>
</div>
<p><p>This is the “title” for the package. It will also be shown in
package listings. Keep it brief and informative. One line does not
mean one line on a landscape poster.</p>
</p>
</section>
<section id="missing-license">
<h4><a class="toc-backref" href="#id5" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_license</span></code>”</a><a class="headerlink" href="#missing-license" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe is missing the <code class="docutils literal notranslate"><span class="pre">about/license</span></code> key</p>
<p>Please add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">about</span><span class="p">:</span>
   <span class="n">license</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">name</span> <span class="n">of</span> <span class="n">license</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p><p>We need to ensure that adding the package to bioconda does not
violate the license. No license means we have no permission to
distribute the package, so we need to have one.</p>
<p>If the license is not a standard FOSS license, please read it to
make sure that we are actually permitted to distribute the
software.</p>
</p>
</section>
<section id="missing-tests">
<h4><a class="toc-backref" href="#id6" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_tests</span></code>”</a><a class="headerlink" href="#missing-tests" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe is missing tests</p>
<p>Please add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">test</span><span class="p">:</span>
    <span class="n">commands</span><span class="p">:</span>
       <span class="o">-</span> <span class="n">some_command</span>
</pre></div>
</div>
<p>and/or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">test</span><span class="p">:</span>
    <span class="n">imports</span><span class="p">:</span>
       <span class="o">-</span> <span class="n">some_module</span>
</pre></div>
</div>
<p>and/or any file named <code class="docutils literal notranslate"><span class="pre">run_test.py`,</span> <span class="pre">``run_test.sh</span></code> or
<code class="docutils literal notranslate"><span class="pre">run_test.pl</span></code> executing tests.</p>
</div>
<p><p>In order to provide a collection of actually working tools, some
basic testing is required. The tests should make sure the tool was
built (if applicable) and installed correctly, and guard against
things breaking with e.g. a version update.</p>
<p>The tests can include commands to be run or modules to import. You
can also use a script (<code class="docutils literal notranslate"><span class="pre">run_test.sh</span></code>, <code class="docutils literal notranslate"><span class="pre">run_test.py</span></code> or
<code class="docutils literal notranslate"><span class="pre">run_test.pl</span></code>) to execute tests (which must exit with exit status
0).</p>
<p>See <a class="reference internal" href="guidelines.html#tests"><span class="std std-ref">Tests</span></a> for more information.</p>
</p>
</section>
<section id="missing-hash">
<h4><a class="toc-backref" href="#id7" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_hash</span></code>”</a><a class="headerlink" href="#missing-hash" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe is missing a checksum for a source file</p>
<p>Please add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span><span class="p">:</span>
  <span class="n">sha256</span><span class="p">:</span> <span class="n">checksum</span><span class="o">-</span><span class="n">value</span>
</pre></div>
</div>
</div>
<p><p>The hash or checksum ensures the integrity of the downloaded source
archive. It guards both against broken or incomplete downloads and
against the source file’s content changing unexpectedly.</p>
<p>While conda allows <code class="docutils literal notranslate"><span class="pre">md5</span></code>, <code class="docutils literal notranslate"><span class="pre">sha1</span></code> in addition to <code class="docutils literal notranslate"><span class="pre">sha256</span></code>, we
prefer the latter.</p>
<p>See <a class="reference internal" href="guidelines.html#hashes"><span class="std std-ref">Hashes</span></a> for more info.</p>
</p>
</section>
<section id="missing-version-or-name">
<h4><a class="toc-backref" href="#id8" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_version_or_name</span></code>”</a><a class="headerlink" href="#missing-version-or-name" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe is missing name and/or version</p>
<p>Please make sure the recipe has at least:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span><span class="p">:</span>
  <span class="n">name</span><span class="p">:</span> <span class="n">package_name</span>
  <span class="n">version</span><span class="p">:</span> <span class="mf">0.12.34</span>
</pre></div>
</div>
</div>
<p><p>For obvious reasons, each package must at least have a name and a
version.</p>
</p>
</section>
<section id="empty-meta-yaml">
<h4><a class="toc-backref" href="#id9" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">empty_meta_yaml</span></code>”</a><a class="headerlink" href="#empty-meta-yaml" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe has an empty meta.yaml!?</p>
<p>Please check if you forgot to commit its contents.</p>
</div>
<p><p>Intentionally left blank. Or not?</p>
</p>
</section>
<section id="missing-meta-yaml">
<h4><a class="toc-backref" href="#id10" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_meta_yaml</span></code>”</a><a class="headerlink" href="#missing-meta-yaml" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe is missing a meta.yaml file</p>
<p>Most commonly, this is because the file was accidentally
named <code class="docutils literal notranslate"><span class="pre">meta.yml</span></code>. If so, rename it to <code class="docutils literal notranslate"><span class="pre">meta.yaml</span></code>.</p>
</div>
<p></p>
</section>
<section id="missing-build">
<h4><a class="toc-backref" href="#id11" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_build</span></code>”</a><a class="headerlink" href="#missing-build" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe is missing a build section</p>
<p>Please add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">build</span><span class="p">:</span>
  <span class="n">number</span><span class="p">:</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
<p></p>
</section>
<section id="missing-build-number">
<h4><a class="toc-backref" href="#id12" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_build_number</span></code>”</a><a class="headerlink" href="#missing-build-number" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe is missing a build number</p>
<p>Please add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">build</span><span class="p">:</span>
    <span class="n">number</span><span class="p">:</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
<p><p>The build number should be <code class="docutils literal notranslate"><span class="pre">0</span></code> for any new version and
incremented with each revised build published.</p>
</p>
</section>
</section>
<section id="noarch-or-not-noarch">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Noarch or not noarch</a><a class="headerlink" href="#noarch-or-not-noarch" title="Link to this heading">¶</a></h3>
<p>Not all packages are platform specific. Pure Python packages for
example will usually work on any platform without modification. For
this reason, we have a third “subdir” (in conda lingo) in addition to
<code class="docutils literal notranslate"><span class="pre">linux-64</span></code> and <code class="docutils literal notranslate"><span class="pre">osx-64</span></code> called <code class="docutils literal notranslate"><span class="pre">noarch</span></code>. Packages marked with
<code class="docutils literal notranslate"><span class="pre">noarch:</span> <span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">noarch:</span> <span class="pre">python</span></code> will be built only once and can
then be used on both supported target platforms.</p>
<p>There are some conda idiosyncracies to be aware of when marking a package
as noarch:</p>
<ul class="simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">noarch</span></code> package cannot use <code class="docutils literal notranslate"><span class="pre">skip</span></code>. Packages that are
<code class="docutils literal notranslate"><span class="pre">noarch</span></code> but require specific Python versions should use pinning
(e.g. <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">python</span> <span class="pre">&gt;3</span></code>).</p></li>
<li><p>Packages that are not <code class="docutils literal notranslate"><span class="pre">noarch</span></code> must use <code class="docutils literal notranslate"><span class="pre">skip</span></code> and must not pin
Python (it will simply not work as expected).</p></li>
</ul>
<section id="should-be-noarch-python">
<h4><a class="toc-backref" href="#id14" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">should_be_noarch_python</span></code>”</a><a class="headerlink" href="#should-be-noarch-python" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe should be build as <code class="docutils literal notranslate"><span class="pre">noarch</span></code></p>
<p>Please add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">build</span><span class="p">:</span>
  <span class="n">noarch</span><span class="p">:</span> <span class="n">python</span>
</pre></div>
</div>
<p>Python packages that don’t require a compiler to build are
normally architecture independent and go into the <code class="docutils literal notranslate"><span class="pre">noarch</span></code>
subset of packages.</p>
</div>
<p><p>Python packages that do not include compiled modules (e.g. Cython
build modules) are architecture independent and only need to be
built (packaged) once, saving time and space.</p>
</p>
</section>
<section id="should-be-noarch-generic">
<h4><a class="toc-backref" href="#id15" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">should_be_noarch_generic</span></code>”</a><a class="headerlink" href="#should-be-noarch-generic" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe should be build as <code class="docutils literal notranslate"><span class="pre">noarch</span></code></p>
<p>Please add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">build</span><span class="p">:</span>
  <span class="n">noarch</span><span class="p">:</span> <span class="n">generic</span>
</pre></div>
</div>
<p>Packages that don’t require a compiler to build are normally
architecture independent and go into the <code class="docutils literal notranslate"><span class="pre">noarch</span></code> subset of
packages.</p>
</div>
<p><p>Packages that contain no platform specific binaries, e.g. Java
packages, and are not Python packages, should be marked as
<code class="docutils literal notranslate"><span class="pre">noarch:</span> <span class="pre">generic</span></code>. This saves build time and space on our
hosters.</p>
</p>
</section>
<section id="should-not-be-noarch-compiler">
<h4><a class="toc-backref" href="#id16" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">should_not_be_noarch_compiler</span></code>”</a><a class="headerlink" href="#should-not-be-noarch-compiler" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe uses a compiler but is marked noarch</p>
<p>Recipes using a compiler should not be marked noarch.</p>
<p>Please remove the <code class="docutils literal notranslate"><span class="pre">build:</span> <span class="pre">noarch:</span></code> section.</p>
</div>
<p><p>Packages containing platform specific binaries should not be
marked <code class="docutils literal notranslate"><span class="pre">noarch</span></code>. Use of a compiler was detected, which
generally indicates that platform specific binaries were built.</p>
</p>
</section>
<section id="should-not-be-noarch-source">
<h4><a class="toc-backref" href="#id17" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">should_not_be_noarch_source</span></code>”</a><a class="headerlink" href="#should-not-be-noarch-source" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe uses per platform sources and cannot be noarch</p>
<p>You are downloading different upstream sources for each
platform. Remove the noarch section or use just one source for all
platforms.</p>
</div>
<p><p>Packages downloading different sources for each platform cannot be
marked <code class="docutils literal notranslate"><span class="pre">noarch</span></code>.</p>
</p>
</section>
<section id="should-not-be-noarch-skip">
<h4><a class="toc-backref" href="#id18" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">should_not_be_noarch_skip</span></code>”</a><a class="headerlink" href="#should-not-be-noarch-skip" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe uses <code class="docutils literal notranslate"><span class="pre">skip:</span> <span class="pre">True</span></code> but is marked noarch</p>
<p>Recipes marked as <code class="docutils literal notranslate"><span class="pre">noarch</span></code> cannot use skip.</p>
</div>
<p></p>
</section>
<section id="should-not-use-skip-python">
<h4><a class="toc-backref" href="#id19" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">should_not_use_skip_python</span></code>”</a><a class="headerlink" href="#should-not-use-skip-python" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe should be noarch and not use python based skipping</p>
<p>Please use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">requirements</span><span class="p">:</span>
   <span class="n">build</span><span class="p">:</span>
     <span class="o">-</span> <span class="n">python</span> <span class="o">&gt;</span><span class="mi">3</span>  <span class="c1"># or &lt;3</span>
   <span class="n">run</span><span class="p">:</span>
     <span class="o">-</span> <span class="n">python</span> <span class="o">&gt;</span><span class="mi">3</span>  <span class="c1"># or &lt;3</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">build:</span> <span class="pre">skip:</span> <span class="pre">True</span></code> feature only works as expected for
packages built specifically for each “platform” (i.e. Python
version and OS). This package should be <code class="docutils literal notranslate"><span class="pre">noarch</span></code> and not use
skips.</p>
</div>
<p><p>The <code class="docutils literal notranslate"><span class="pre">skip</span></code> mechanism works by not creating packages for some of
our target platforms and interpreters (= Python versions). It
therefore does not work in conjunction with <code class="docutils literal notranslate"><span class="pre">noarch</span></code>.</p>
<p>If the recipe has a <code class="docutils literal notranslate"><span class="pre">skip</span></code> only for specific Python versions
(e.g. <code class="docutils literal notranslate"><span class="pre">skip:</span> <span class="pre">True</span> <span class="pre">#</span> <span class="pre">[py2k]</span></code>), use pinning instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">requirements</span><span class="p">:</span>
  <span class="n">run</span><span class="p">:</span>
    <span class="n">python</span> <span class="o">&gt;</span><span class="mi">3</span>
</pre></div>
</div>
</p>
</section>
</section>
<section id="policy">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">Policy</a><a class="headerlink" href="#policy" title="Link to this heading">¶</a></h3>
<p>These checks enforce some of our “policy” decisions for keeping
Bioconda and it’s recipe repository consistent and clean.</p>
<section id="uses-vcs-url">
<h4><a class="toc-backref" href="#id21" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">uses_vcs_url</span></code>”</a><a class="headerlink" href="#uses-vcs-url" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe downloads source from a VCS</p>
<p>Please build from source archives and don’t use the <code class="docutils literal notranslate"><span class="pre">git_url</span></code>,
<code class="docutils literal notranslate"><span class="pre">svn_url</span></code> or <code class="docutils literal notranslate"><span class="pre">hg_url</span></code> feature of conda.</p>
</div>
<p><p>While <code class="docutils literal notranslate"><span class="pre">conda</span></code> technically supports downloading sources directly
from a versioning system, we strongly discourage doing so.</p>
<p>There are a number of reasons for this:</p>
<ul class="simple">
<li><p>Making a release expresses an author’s intent that the software
is at a stable point suitable for distribution. Distributing a
specific, unreleased revision makes it unnecessarily difficult
for upstream authors to help with bugs users might encounter.</p></li>
<li><p>For reproducibility, we keep a backup of all source files used to
build packages on Bioconda, but cannot (currently) do so for
git/svn/hg repositories.</p></li>
<li><p>Git uses checksums (hashes) as revision labels. These have no
implicit order, and would require assigning a pseudo version
number to the package to allow knowing whether another release is
newer or older than a git revision based one.</p></li>
</ul>
<p>With the exception of old, orphaned projects, upstream authors will
usually be happy to create a release if asked kindly. Most hosting
sites allow “tagging” a release via their web interface, making the
process simple.</p>
</p>
</section>
<section id="folder-and-package-name-must-match">
<h4><a class="toc-backref" href="#id22" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">folder_and_package_name_must_match</span></code>”</a><a class="headerlink" href="#folder-and-package-name-must-match" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe folder and package name do not match</p>
<p>For clarity, the name of the folder the <code class="docutils literal notranslate"><span class="pre">meta.yaml</span></code> resides,
in and the name of the toplevel package should match.</p>
</div>
<p><p>It’s just way simpler to find the “recipe” building a “package” if
you can expect that the recipe building “samtools” is found in the
“samtools” folder (and not hiding in “new_release” or “bamtools”).</p>
<p>If you are using <code class="docutils literal notranslate"><span class="pre">outputs</span></code> to split a single upstream
distribution into multiple packages, try to make sure each output
package name contains the name of the tool you are packaging</p>
</p>
</section>
<section id="gpl-requires-license-distributed">
<h4><a class="toc-backref" href="#id23" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">gpl_requires_license_distributed</span></code>”</a><a class="headerlink" href="#gpl-requires-license-distributed" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe packages GPL software but is missing copy of license</p>
<p>The GPL requires that a copy of the license accompany all distributions
of the software. Please add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">about</span><span class="p">:</span>
    <span class="n">license_file</span><span class="p">:</span> <span class="n">name_of_license_file</span>
</pre></div>
</div>
<p>If the upstream tar ball does not include a copy, please ask the
authors of the software to add it to their distribution archive.</p>
</div>
<p><p>While many upstream authors are not aware of this when they grant
license to use and distribute their work under the GPL, the GPL
says that we must include a copy of the GPL with every package we
distribute. It can be annoying and feel redundant, but it simply is
what we must do to be permitted to distribute the software.</p>
</p>
</section>
<section id="should-not-use-fn">
<h4><a class="toc-backref" href="#id24" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">should_not_use_fn</span></code>”</a><a class="headerlink" href="#should-not-use-fn" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe uses source/fn</p>
<p>There is no need to specify the filename as the URL should give a name
and it will in most cases be unpacked automatically.</p>
</div>
<p><p>The <code class="docutils literal notranslate"><span class="pre">fn</span></code> is really only needed if you have multiple <code class="docutils literal notranslate"><span class="pre">url</span></code> s that
share a filename, which is a somewhat constructed scenario.</p>
</p>
</section>
<section id="has-windows-bat-file">
<h4><a class="toc-backref" href="#id25" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">has_windows_bat_file</span></code>”</a><a class="headerlink" href="#has-windows-bat-file" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe directory contains a <code class="docutils literal notranslate"><span class="pre">bat</span></code> file</p>
<p>Bioconda does not currently build packages for Windows (and has at
this time no plans to change this), so these files cannot be
tested.</p>
<p>Please remove any <code class="docutils literal notranslate"><span class="pre">*.bat</span></code> files generated by <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">skeleton</span></code>
from the recipe directory.</p>
</div>
<p><p>The skeleton commands (e.g. <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">skeleton</span> <span class="pre">pypi</span></code>) create this
file automatically, but we do not build for windows, making this
file merely clutter needlessly increasing the size of our git
repository.</p>
</p>
</section>
<section id="long-summary">
<h4><a class="toc-backref" href="#id26" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">long_summary</span></code>”</a><a class="headerlink" href="#long-summary" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The summary line is rather long</p>
<p>Consider using the description field for longer text:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">about</span><span class="p">:</span>
  <span class="n">summary</span><span class="p">:</span> <span class="n">Fancy</span> <span class="n">Read</span> <span class="n">Simulator</span> <span class="p">(</span><span class="n">makes</span> <span class="n">drinks</span><span class="p">)</span>
  <span class="n">description</span><span class="p">:</span> <span class="o">|</span>
    <span class="n">XYZ</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">very</span> <span class="n">fancy</span> <span class="n">read</span> <span class="n">simulator</span> <span class="n">that</span> <span class="n">will</span> <span class="ow">not</span> <span class="n">just</span> <span class="n">make</span> <span class="n">coffee</span>
    <span class="k">while</span> <span class="n">you</span> <span class="n">are</span> <span class="n">waiting</span> <span class="n">but</span> <span class="n">prepare</span> <span class="nb">all</span> <span class="n">kinds</span> <span class="n">of</span> <span class="n">exquisite</span> <span class="n">caffeeinated</span>
    <span class="n">beverages</span> <span class="kn">from</span> <span class="nn">freshly</span> <span class="n">roasted</span><span class="p">,</span> <span class="n">single</span> <span class="n">source</span> <span class="n">beans</span> <span class="n">ground</span> <span class="n">to</span> <span class="n">match</span>
    <span class="n">ambient</span> <span class="n">humidity</span><span class="o">.</span>
</pre></div>
</div>
<p>This will fit better into the templates listing and describing
recipes, which assume the summary to be a title and the
description to be one or more paragraphs.</p>
</div>
<p><p>Recipes have a <code class="docutils literal notranslate"><span class="pre">summary</span></code> and <code class="docutils literal notranslate"><span class="pre">description</span></code> field. The
recipe/package description pages at anaconda.org/bioconda and here
are designed to use the <code class="docutils literal notranslate"><span class="pre">summary</span></code> as a title line and provide a
separate section for multi-paragraph descriptions filled with
content from the <code class="docutils literal notranslate"><span class="pre">description</span></code> field. The <code class="docutils literal notranslate"><span class="pre">summary</span></code> is also
used for package listings with only one row per package.</p>
<p>It just looks better if the summary fits into one line.</p>
</p>
</section>
<section id="cran-packages-to-conda-forge">
<h4><a class="toc-backref" href="#id27" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">cran_packages_to_conda_forge</span></code>”</a><a class="headerlink" href="#cran-packages-to-conda-forge" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">CRAN packages not depending on Bioconda should go to Conda-Forge</p>
<p>This recipe builds a CRAN package and does not depend on packages
from Bioconda. It should therefore be moved to Conda-Forge.</p>
</div>
<p><p>Conda-Forge has a very active R community planning to eventually
package all of CRAN. For that reason, we only allow CRAN packages
on Bioconda if they depend on other Bioconda packages.</p>
</p>
</section>
<section id="version-starts-with-v">
<h4><a class="toc-backref" href="#id28" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">version_starts_with_v</span></code>”</a><a class="headerlink" href="#version-starts-with-v" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The version string should not start with a “v” character</p>
<p>Version numbers in Conda recipes need to follow PEP 386</p>
</div>
<p><p>Version numbers in Conda recipes need to follow PEP 386 and may
not start with a “v”. With a “v”, the uploaded package displays
incorrectly on the Anaconda website.</p>
</p>
</section>
</section>
<section id="syntax">
<h3><a class="toc-backref" href="#id29" role="doc-backlink">Syntax</a><a class="headerlink" href="#syntax" title="Link to this heading">¶</a></h3>
<p>These checks ensure that the <code class="docutils literal notranslate"><span class="pre">extra</span></code> section conforms to our
“schema”.</p>
<section id="extra-identifiers-not-list">
<h4><a class="toc-backref" href="#id30" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">extra_identifiers_not_list</span></code>”</a><a class="headerlink" href="#extra-identifiers-not-list" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The extra/identifiers section must be a list</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">extra</span><span class="p">:</span>
   <span class="n">identifiers</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">doi</span><span class="p">:</span><span class="mi">123</span>
</pre></div>
</div>
</div>
<p></p>
</section>
<section id="extra-identifiers-not-string">
<h4><a class="toc-backref" href="#id31" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">extra_identifiers_not_string</span></code>”</a><a class="headerlink" href="#extra-identifiers-not-string" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">Each item in the extra/identifiers section must be a string</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">extra</span><span class="p">:</span>
   <span class="n">identifiers</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">doi</span><span class="p">:</span><span class="mi">123</span>
</pre></div>
</div>
<p>Note that there is no space around the colon</p>
</div>
<p></p>
</section>
<section id="extra-identifiers-missing-colon">
<h4><a class="toc-backref" href="#id32" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">extra_identifiers_missing_colon</span></code>”</a><a class="headerlink" href="#extra-identifiers-missing-colon" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">Each item in the extra/identifiers section must be of form <code class="docutils literal notranslate"><span class="pre">type:value</span></code></p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">extra</span><span class="p">:</span>
   <span class="n">identifiers</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">doi</span><span class="p">:</span><span class="mi">123</span>
</pre></div>
</div>
</div>
<p><p>Ensure that the section is of the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">extra</span><span class="p">:</span>
  <span class="n">identifiers</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">doi</span><span class="p">:</span><span class="mf">10.1093</span><span class="o">/</span><span class="n">bioinformatics</span><span class="o">/</span><span class="n">bts480</span>
    <span class="o">-</span> <span class="n">biotools</span><span class="p">:</span><span class="n">Snakemake</span>
</pre></div>
</div>
<p>In particular, ensure that each identifier starts with a type
(<code class="docutils literal notranslate"><span class="pre">doi</span></code>, <code class="docutils literal notranslate"><span class="pre">biotools</span></code>, …), followed by a colon and the
identifier.  Whitespace is not allowed.</p>
</p>
</section>
<section id="extra-skip-lints-not-list">
<h4><a class="toc-backref" href="#id33" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">extra_skip_lints_not_list</span></code>”</a><a class="headerlink" href="#extra-skip-lints-not-list" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The extra/skip-lints section must contain a list</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">extra</span><span class="p">:</span>
   <span class="n">skip</span><span class="o">-</span><span class="n">lints</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">should_use_compilers</span>
</pre></div>
</div>
</div>
<p><p>The recipe is trying to skip a lint with an unknown name. Check
the list here for the correct name.</p>
</p>
</section>
<section id="version-constraints-missing-whitespace">
<h4><a class="toc-backref" href="#id34" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">version_constraints_missing_whitespace</span></code>”</a><a class="headerlink" href="#version-constraints-missing-whitespace" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">Packages and their version constraints must be space separated</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">host</span><span class="p">:</span>
    <span class="n">python</span> <span class="o">&gt;=</span><span class="mi">3</span>
</pre></div>
</div>
</div>
<p><p>Version constraints in the meta.yaml must have spaces between the package
name and the constraint.</p>
</p>
</section>
</section>
<section id="recipe-parsing">
<h3><a class="toc-backref" href="#id35" role="doc-backlink">Recipe Parsing</a><a class="headerlink" href="#recipe-parsing" title="Link to this heading">¶</a></h3>
<p>These lints happen implicitly during recipe parsing. They cannot be
skipped!</p>
<section id="duplicate-key-in-meta-yaml">
<h4><a class="toc-backref" href="#id36" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">duplicate_key_in_meta_yaml</span></code>”</a><a class="headerlink" href="#duplicate-key-in-meta-yaml" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe meta.yaml contains a duplicate key</p>
<p>This is invalid YAML, as it’s unclear what the structure should
become. Please merge the two offending sections</p>
</div>
<p><p>Say you have two <code class="docutils literal notranslate"><span class="pre">requirements:</span> <span class="pre">build:</span></code> sections, should the
second replace the list in the first, or should it append to it?
The YAML standard does not specify this. Instead, it just says that
sections cannot occur twice. Some YAML parsers allow duplicate
keys, but it’s often unclear what the result should be, and it’s
easy to miss another section further down in the recipe, so we
don’t.</p>
</p>
</section>
<section id="unknown-selector">
<h4><a class="toc-backref" href="#id37" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">unknown_selector</span></code>”</a><a class="headerlink" href="#unknown-selector" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe failed to parse due to selector lines</p>
<p>Please request help from &#64;bioconda/core.</p>
</div>
<p><p>The recipe uses an <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">[abc]</span></code> selector that is not understood by
bioconda-utils. If you actually do encounter this, ping
<code class="docutils literal notranslate"><span class="pre">&#64;bioconda/core</span></code> at it is very likely a bug.</p>
</p>
</section>
<section id="conda-render-failure">
<h4><a class="toc-backref" href="#id38" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">conda_render_failure</span></code>”</a><a class="headerlink" href="#conda-render-failure" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe was not understood by conda-build</p>
<p>Please request help from &#64;bioconda/core.</p>
</div>
<p><p>There was an error in <code class="docutils literal notranslate"><span class="pre">conda-build</span></code> “rendering” the
recipe. Please contact <code class="docutils literal notranslate"><span class="pre">&#64;bioconda/core</span></code> for help.</p>
</p>
</section>
<section id="jinja-render-failure">
<h4><a class="toc-backref" href="#id39" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">jinja_render_failure</span></code>”</a><a class="headerlink" href="#jinja-render-failure" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe could not be rendered by Jinja2</p>
<p>Check if you are missing quotes or curly braces in Jinja2 template
expressions. (The parts with <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">something</span> <span class="pre">}}</span></code> or <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">set</span>
<span class="pre">var=&quot;value&quot;</span> <span class="pre">%}</span></code>).</p>
</div>
<p><p>Conda recipes are technically not YAML, but Jinja YAML
templates. The Jinja template engine turning the recipe text into
YAML complained about a part in your recipe.</p>
<p>Most frequently, this is due to unbalanced or missing braces,
parentheses or quotes.</p>
</p>
</section>
<section id="unknown-check">
<h4><a class="toc-backref" href="#id40" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">unknown_check</span></code>”</a><a class="headerlink" href="#unknown-check" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">Something went wrong inside the linter</p>
<p>Please request help from &#64;bioconda/core</p>
</div>
<p><p>You broke it!!! Congratulations, you found a bug in the
linter. Ping &#64;bioconda/core to figure out what’s going on.</p>
</p>
</section>
</section>
<section id="repository">
<h3><a class="toc-backref" href="#id41" role="doc-backlink">Repository</a><a class="headerlink" href="#repository" title="Link to this heading">¶</a></h3>
<section id="in-other-channels">
<h4><a class="toc-backref" href="#id42" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">in_other_channels</span></code>”</a><a class="headerlink" href="#in-other-channels" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">A package of the same name already exists in another channel</p>
<p>Bioconda and Conda-Forge occupy the same name space and have
agreed not to add packages if a package of the same name is
already present in the respective other channel.</p>
<p>If this is a new package, pease choose a different name
(e.g. append <code class="docutils literal notranslate"><span class="pre">-bio</span></code>).</p>
<p>If you are updating a package, please continue in the package’s
new home at conda-forge.</p>
</div>
<p><p>The package exists in another dependent channel (currently
conda-forge and defaults). This often happens when a general-use
package was added to bioconda first but was subsequently added to
one of the more general channels. In this case we’d prefer it to be
in the general channel.</p>
<p>We want to minimize duplicated work. If a package already exists in
another dependent channel, it doesn’t need to be maintained in the
bioconda channel.</p>
<p>In special cases this can be overridden, for example if a
bioconda-specific patch is required. However it is almost always
better to fix or update the recipe in the other channel. Note that
the package in the bioconda channel will remain in order to
maintain reproducibility.</p>
<p>Sometimes when adding or updating a recipe in a pull request to
<code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> the conda-forge linter will warn that a recipe with
the same name already exists in bioconda. When this happens,
usually the best thing to do is:</p>
<ol class="arabic simple">
<li><p>Submit – but don’t merge yet! – a PR to bioconda that removes the
recipe.  In that PR, reference the conda-forge/staged-recipes PR.</p></li>
<li><p>Merge the conda-forge PR adding or updating the recipe</p></li>
<li><p>Merge the bioconda PR deleting the recipe</p></li>
</ol>
</p>
</section>
<section id="build-number-needs-bump">
<h4><a class="toc-backref" href="#id43" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">build_number_needs_bump</span></code>”</a><a class="headerlink" href="#build-number-needs-bump" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe build number should be incremented</p>
<p>A package with the same name and version and a build number at
least as high as specified in the recipe already exists in the
channel. Please increase the build number.</p>
</div>
<p><p>Every time you change a recipe, you should assign a new
(incremented) build number. Otherwise, the package may not be built
(it will be built only if the “build string” is different, which
might happen only on one architecture and not the other).</p>
</p>
</section>
<section id="build-number-needs-reset">
<h4><a class="toc-backref" href="#id44" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">build_number_needs_reset</span></code>”</a><a class="headerlink" href="#build-number-needs-reset" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe build number should be reset to 0</p>
<p>No previous build of a package of this name and this version exists,
the build number should therefore be 0.</p>
</div>
<p><p>If no previous build exists for a package/version combination, the
build number should be 0.</p>
</p>
</section>
<section id="recipe-is-blacklisted">
<h4><a class="toc-backref" href="#id45" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">recipe_is_blacklisted</span></code>”</a><a class="headerlink" href="#recipe-is-blacklisted" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe is currently blacklisted and will not be built</p>
<p>If you are intending to repair this recipe, remove it from
the build fail blacklist.</p>
</div>
<p><p>We maintain a list of packages that are “blacklisted”. Recipes are
added to this list if they fail to rebuild and would block
automatic build processes. Just remove your package from this list
and proceed as normal. Hopefully, you can fix whatever got the
recipe on the blacklist!</p>
</p>
</section>
</section>
<section id="deprecations">
<h3><a class="toc-backref" href="#id46" role="doc-backlink">Deprecations</a><a class="headerlink" href="#deprecations" title="Link to this heading">¶</a></h3>
<p>These checks catch packages or recipe idioms we no longer use or that
no longer work and need to be changed.</p>
<section id="uses-perl-threaded">
<h4><a class="toc-backref" href="#id47" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">uses_perl_threaded</span></code>”</a><a class="headerlink" href="#uses-perl-threaded" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe uses <code class="docutils literal notranslate"><span class="pre">perl-threaded</span></code></p>
<p>Please use <code class="docutils literal notranslate"><span class="pre">perl</span></code> instead.</p>
</div>
<p><p>Previously, Bioconda used <code class="docutils literal notranslate"><span class="pre">perl-threaded</span></code> as a dependency for
Perl packages, but now we are using <code class="docutils literal notranslate"><span class="pre">perl</span></code> instead. When one of
these older recipes is updated, it will fail this check.</p>
</p>
</section>
<section id="uses-javajdk">
<h4><a class="toc-backref" href="#id48" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">uses_javajdk</span></code>”</a><a class="headerlink" href="#uses-javajdk" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe uses <code class="docutils literal notranslate"><span class="pre">java-jdk</span></code></p>
<p>Please use <code class="docutils literal notranslate"><span class="pre">openjdk</span></code> instead.</p>
</div>
<p><p>Previously, Bioconda used <code class="docutils literal notranslate"><span class="pre">java-jdk</span></code> as a dependency for Java
packages, but now we are using <code class="docutils literal notranslate"><span class="pre">openjdk</span></code> instead. When one of
those older recipes is updated, it will fail this check.</p>
</p>
</section>
<section id="deprecated-numpy-spec">
<h4><a class="toc-backref" href="#id49" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">deprecated_numpy_spec</span></code>”</a><a class="headerlink" href="#deprecated-numpy-spec" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe contains a deprecated numpy spec</p>
<p>Please remove the <code class="docutils literal notranslate"><span class="pre">x.x</span></code> - pinning is now handled automatically.</p>
</div>
<p><p>Originally, <code class="docutils literal notranslate"><span class="pre">conda</span></code> used the <code class="docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">x.x</span></code> syntax to enable
pinning for numpy. This way of pinning has been superceded by the
<code class="docutils literal notranslate"><span class="pre">conda_build_config.yaml</span></code> way of automatic pinning. You can
now just write <code class="docutils literal notranslate"><span class="pre">numpy</span></code> (without any special string appended).</p>
</p>
</section>
<section id="uses-matplotlib">
<h4><a class="toc-backref" href="#id50" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">uses_matplotlib</span></code>”</a><a class="headerlink" href="#uses-matplotlib" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe uses <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, but <code class="docutils literal notranslate"><span class="pre">matplotlib-base</span></code> is recommended</p>
<p>The <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> dependency should be replaced with <code class="docutils literal notranslate"><span class="pre">matplotlib-base</span></code>
unless the package explicitly needs the PyQt interactive plotting backend.</p>
</div>
<p><p>The <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> package has been split into <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>
and <code class="docutils literal notranslate"><span class="pre">matplotlib-base</span></code>. The only difference is that
<code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> contains an additional dependency on <code class="docutils literal notranslate"><span class="pre">pyqt</span></code>,
which pulls in many other dependencies. In most cases, using
<code class="docutils literal notranslate"><span class="pre">matplotlib-base</span></code> is sufficient.</p>
</p>
</section>
</section>
<section id="build-helpers">
<h3><a class="toc-backref" href="#id51" role="doc-backlink">Build helpers</a><a class="headerlink" href="#build-helpers" title="Link to this heading">¶</a></h3>
<section id="missing-run-exports">
<h4><a class="toc-backref" href="#id52" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">missing_run_exports</span></code>”</a><a class="headerlink" href="#missing-run-exports" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">Recipe should have a run_exports statement that ensures correct pinning in downstream packages</p>
<p>This ensures that the package is automatically pinned to a compatible version if
it is used as a dependency in another recipe.
This is a conservative strategy to avoid breakage. We came to the 
conclusion that it is better to require this little overhead instead
of trying to fix things when they break later on.
This holds for compiled packages (in particular those with shared
libraries) but also for e.g. Python packages, as those might also
introduce breaking changes in their APIs or command line interfaces.</p>
<p>We distinguish between four cases.</p>
<p><strong>Case 1:</strong> If the software follows semantic versioning (or it has at least a normal version string (like 1.2.3) and the actual strategy of the devs is unknown), add run_exports to the recipe like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">build</span><span class="p">:</span>
  <span class="n">run_exports</span><span class="p">:</span>
    <span class="o">-</span> <span class="p">{{</span> <span class="n">pin_subpackage</span><span class="p">(</span><span class="s1">&#39;myrecipe&#39;</span><span class="p">,</span> <span class="n">max_pin</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">)</span> <span class="p">}}</span>
</pre></div>
</div>
<p>with <code class="docutils literal notranslate"><span class="pre">myrecipe</span></code> being the name of the recipe (you can also use the name variable).
This will by default pin the package to <code class="docutils literal notranslate"><span class="pre">&gt;=1.2.0,&lt;2.0.0</span></code> where <code class="docutils literal notranslate"><span class="pre">1.2.0</span></code> is the 
version of the package at build time of the one depending on it and <code class="docutils literal notranslate"><span class="pre">&lt;2.0.0</span></code> constrains
it to be less than the next major (i.e. potentially not backward compatible) version.</p>
<p><strong>Case 2:</strong> If the software version starts with a 0 (e.g. <code class="docutils literal notranslate"><span class="pre">0.3.2</span></code>) semantic versioning allows breaking changes in minor releases. Hence, you should use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">build</span><span class="p">:</span>
  <span class="n">run_exports</span><span class="p">:</span>
    <span class="o">-</span> <span class="p">{{</span> <span class="n">pin_subpackage</span><span class="p">(</span><span class="s1">&#39;myrecipe&#39;</span><span class="p">,</span> <span class="n">max_pin</span><span class="o">=</span><span class="s2">&quot;x.x&quot;</span><span class="p">)</span> <span class="p">}}</span>
</pre></div>
</div>
<p><strong>Case 3:</strong> If the software has a normal versioning (like 1.2.3) but does reportedly not follow semantic versioning, please choose the <code class="docutils literal notranslate"><span class="pre">max_pin</span></code> argument such that it captures the potential next version that will introduce a breaking change.
E.g. if you expect breaking changes to occur with the next minor release, choose <code class="docutils literal notranslate"><span class="pre">max_pin=&quot;x.x&quot;</span></code>, if they even can occur with the next patch release, choose <code class="docutils literal notranslate"><span class="pre">max_pin=&quot;x.x.x&quot;</span></code>.</p>
<p><strong>Case 4:</strong> If the software does have a non-standard versioning (e.g. calendar versioning like 20220602), we cannot really protect well against breakages. However, we can at least pin to the current version as a minimum and skip the max_pin constraint. This works by setting <code class="docutils literal notranslate"><span class="pre">max_pin=None</span></code>.</p>
<p>In the recipe depending on this one, one just needs to specify the package name
and no version at all.</p>
<p>Also check out the possible arguments of <code class="xref any docutils literal notranslate"><span class="pre">pin_subpackage</span></code> here:
<a class="reference external" href="https://docs.conda.io/projects/conda-build/en/stable/resources/define-metadata.html#export-runtime-requirements">https://docs.conda.io/projects/conda-build/en/stable/resources/define-metadata.html#export-runtime-requirements</a></p>
<p>Since this strategy can lead to potentially more conflicts in dependency pinnings between tools,
it is advisable to additionally set a common version of very frequently used packages for all
builds. This happens by specifying the version via a separate pull request in the project wide build
configuration file here:
<a class="reference external" href="https://github.com/bioconda/bioconda-utils/blob/master/bioconda_utils/bioconda_utils-conda_build_config.yaml">https://github.com/bioconda/bioconda-utils/blob/master/bioconda_utils/bioconda_utils-conda_build_config.yaml</a></p>
<p>Finally, note that conda is unable to conduct such pinnings in case the dependency and the depending recipe
are updated within the same pull request. Hence, the pull request adding the run_exports statement
has to be merged before the one updating or creating the depending recipe is created.</p>
<p><strong>Importantly</strong> note that this shall not be used to pin compatible versions of other recipes in the current recipe.
Rather, those other recipes have to get their own run_exports sections.
Usually, there is no need to use <code class="docutils literal notranslate"><span class="pre">pin_compatible</span></code>, just use <code class="docutils literal notranslate"><span class="pre">pin_subpackage</span></code> as shown above, and fix
run_exports in upstream packages as well if needed.</p>
</div>
<p></p>
</section>
<section id="should-use-compilers">
<h4><a class="toc-backref" href="#id53" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">should_use_compilers</span></code>”</a><a class="headerlink" href="#should-use-compilers" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe requires a compiler directly</p>
<p>Since version 3, <code class="docutils literal notranslate"><span class="pre">conda-build</span></code> uses a special syntax to require
compilers for a given language matching the architecture for which
a package is being build. Please use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">requirements</span><span class="p">:</span>
   <span class="n">build</span><span class="p">:</span>
     <span class="o">-</span> <span class="p">{{</span> <span class="n">compiler</span><span class="p">(</span><span class="s1">&#39;language&#39;</span><span class="p">)</span> <span class="p">}}</span>
</pre></div>
</div>
<p>Where language is one of <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">cxx</span></code>, <code class="docutils literal notranslate"><span class="pre">fortran</span></code>, <code class="docutils literal notranslate"><span class="pre">go</span></code> or
<code class="docutils literal notranslate"><span class="pre">cgo</span></code>. You can specify multiple compilers if needed.</p>
<p>There is no need to add <code class="docutils literal notranslate"><span class="pre">libgfortran</span></code>, <code class="docutils literal notranslate"><span class="pre">libgcc</span></code>, or
<code class="docutils literal notranslate"><span class="pre">toolchain</span></code> to the dependencies as this will be handled by
conda-build itself.</p>
</div>
<p><p>The recipe uses a compiler directly. Since version 3,
<code class="docutils literal notranslate"><span class="pre">conda-build</span></code> has a special syntax for compilers, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">build</span><span class="p">:</span>
  <span class="o">-</span> <span class="p">{{</span> <span class="n">compiler</span><span class="p">(</span><span class="s1">&#39;cxx&#39;</span><span class="p">)</span> <span class="p">}}</span>
</pre></div>
</div>
<p>This will select the appropriate C++ compiler (<code class="docutils literal notranslate"><span class="pre">clang</span></code> on MacOS
and <code class="docutils literal notranslate"><span class="pre">g++</span></code> on Linux) automatically, inject apropriate environment
variables (<code class="docutils literal notranslate"><span class="pre">CXX</span></code>, <code class="docutils literal notranslate"><span class="pre">CXXFLAGS</span></code>, <code class="docutils literal notranslate"><span class="pre">LDFLAGS</span></code>, …) into the build
environment and create the right dependencies (e.g. <code class="docutils literal notranslate"><span class="pre">libgcc</span></code>).
Which compilers are used is configured via
<code class="docutils literal notranslate"><span class="pre">conda_build_config.yaml</span></code>, which we “inherit” from conda-forge.</p>
<p>Packages no longer needed are <code class="docutils literal notranslate"><span class="pre">toolchain</span></code>, <code class="docutils literal notranslate"><span class="pre">libgfortran</span></code>,
<code class="docutils literal notranslate"><span class="pre">libgcc</span></code>. The compilers <code class="docutils literal notranslate"><span class="pre">gcc</span></code>, <code class="docutils literal notranslate"><span class="pre">llvm</span></code>, <code class="docutils literal notranslate"><span class="pre">go</span></code>, and <code class="docutils literal notranslate"><span class="pre">cgo</span></code>
don’t need to be installed directly, instead specify <code class="docutils literal notranslate"><span class="pre">c</span></code>,
<code class="docutils literal notranslate"><span class="pre">cxx</span></code>, <code class="docutils literal notranslate"><span class="pre">fortran</span></code>, <code class="docutils literal notranslate"><span class="pre">go</span></code> or <code class="docutils literal notranslate"><span class="pre">cgo</span></code> as language using the
compiler syntax.</p>
<p>One exception from this is <code class="docutils literal notranslate"><span class="pre">llvm-openmp</span> <span class="pre">#</span> <span class="pre">[osx]</span></code> which still
needs to be added manually if your package makes use of OpenMP.</p>
<p>See <a class="reference internal" href="../faqs.html#compiler-tools"><span class="std std-ref">Compiler tools</span></a> for details.</p>
</p>
</section>
<section id="uses-setuptools">
<h4><a class="toc-backref" href="#id54" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">uses_setuptools</span></code>”</a><a class="headerlink" href="#uses-setuptools" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe uses setuptools in run depends</p>
<p>Most Python packages only need setuptools during installation.
Check if the package really needs setuptools (e.g. because it uses
pkg_resources or setuptools console scripts).</p>
</div>
<p><p><code class="docutils literal notranslate"><span class="pre">setuptools</span></code> is typically used to install dependencies for Python
packages but most of the time this is not needed within a conda
package as a run dependency.</p>
<p>Some packages do need <code class="docutils literal notranslate"><span class="pre">setuptools</span></code>, in which case this check can
be overridden.  <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> may be required, e.g., if a package
loads resources via <code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code> which is part of
<code class="docutils literal notranslate"><span class="pre">setuptools</span></code>. That dependency can also be introduced implicitly
when <code class="docutils literal notranslate"><span class="pre">setuptools</span></code>-created console scripts are used.  To avoid
this, make sure to carry <code class="docutils literal notranslate"><span class="pre">console_scripts</span></code> entry points from
<code class="docutils literal notranslate"><span class="pre">setup.py</span></code> over to <code class="docutils literal notranslate"><span class="pre">meta.yaml</span></code> to replace them with scripts
created by <code class="docutils literal notranslate"><span class="pre">conda</span></code>/<code class="docutils literal notranslate"><span class="pre">conda-build</span></code> which don’t require
<code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code>. Recipes generated via <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">skeleton</span> <span class="pre">pypi</span></code>
already include the required section.</p>
</p>
</section>
<section id="setup-py-install-args">
<h4><a class="toc-backref" href="#id55" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">setup_py_install_args</span></code>”</a><a class="headerlink" href="#setup-py-install-args" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe uses setuptools without required arguments</p>
<p>Please use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$PYTHON setup.py install --single-version-externally-managed --record=record.txt
</pre></div>
</div>
<p>The parameters are required to avoid <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> trying (and
failing) to install <code class="docutils literal notranslate"><span class="pre">certifi</span></code> when a package this recipe
requires defines entrypoints in its <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>.</p>
</div>
<p><p>When a package depends on setuptools, we have to disable some parts
of setuptools during installation to make it work correctly with
conda. In particular, it seems that packages depend on other
packages that specify entry points (e.g., <code class="docutils literal notranslate"><span class="pre">pyfaidx</span></code>) will cause
errors about how <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> is not allowed to install
<code class="docutils literal notranslate"><span class="pre">certifi</span></code> in a conda package.</p>
<p>Change the line in either in <code class="docutils literal notranslate"><span class="pre">build.sh</span></code> or the <code class="docutils literal notranslate"><span class="pre">build:script</span></code>
key in <code class="docutils literal notranslate"><span class="pre">meta.yaml</span></code> from:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$PYTHON setup.py install
</pre></div>
</div>
<p>to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$PYTHON setup.py install --single-version-externally-managed --record=record.txt
</pre></div>
</div>
</p>
</section>
<section id="compilers-must-be-in-build">
<h4><a class="toc-backref" href="#id56" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">compilers_must_be_in_build</span></code>”</a><a class="headerlink" href="#compilers-must-be-in-build" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">The recipe requests a compiler in a section other than build</p>
<p>Please move the <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">compiler('language')</span> <span class="pre">}}</span></code> line into the
<code class="docutils literal notranslate"><span class="pre">requirements:</span> <span class="pre">build:</span></code> section.</p>
</div>
<p><p>A <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">compiler('xyz')</span> <span class="pre">}}</span></code> variable was found, but not in the
<code class="docutils literal notranslate"><span class="pre">build:</span></code> section. Move <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">compiler()</span> <span class="pre">}}</span></code> variables to the
<code class="docutils literal notranslate"><span class="pre">build:</span></code> section.</p>
</p>
</section>
<section id="cython-must-be-in-host">
<h4><a class="toc-backref" href="#id57" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">cython_must_be_in_host</span></code>”</a><a class="headerlink" href="#cython-must-be-in-host" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">Cython should be in the host section</p>
<p>Move cython to <code class="docutils literal notranslate"><span class="pre">host</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">requirements</span><span class="p">:</span>
  <span class="n">host</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">cython</span>
</pre></div>
</div>
</div>
<p><p>Cython should match the Python version, so we keep it in the
host section for now.</p>
</p>
</section>
<section id="cython-needs-compiler">
<h4><a class="toc-backref" href="#id58" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">cython_needs_compiler</span></code>”</a><a class="headerlink" href="#cython-needs-compiler" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">Cython generates C code, which will need to be compiled</p>
<p>Add the compiler to the recipe:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">requirements</span><span class="p">:</span>
  <span class="n">build</span><span class="p">:</span>
    <span class="o">-</span> <span class="p">{{</span> <span class="n">compiler</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">)</span> <span class="p">}}</span>
</pre></div>
</div>
</div>
<p><p>Cython is compiled into C code, which then needs to be
compiled. You almost certainly want to have a C compiler in your
recipe.</p>
</p>
</section>
</section>
<section id="linter-errors">
<h3><a class="toc-backref" href="#id59" role="doc-backlink">Linter Errors</a><a class="headerlink" href="#linter-errors" title="Link to this heading">¶</a></h3>
<section id="linter-failure">
<h4><a class="toc-backref" href="#id60" role="doc-backlink">“<code class="xref py py-class docutils literal notranslate"><span class="pre">linter_failure</span></code>”</a><a class="headerlink" href="#linter-failure" title="Link to this heading">¶</a></h4>
<div class="admonition">
<p class="admonition-title">An unexpected exception was raised during linting</p>
<p>Please file an issue at the bioconda-utils repo</p>
</div>
<p></p>
</section>
</section>
</section>
<section id="developer-docs">
<h2>Developer docs<a class="headerlink" href="#developer-docs" title="Link to this heading">¶</a></h2>
<p>See <code class="xref any docutils literal notranslate"><span class="pre">bioconda_utils.lint</span></code> for information on how to write additional checks.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo/bioconda_monochrome_small.png" alt="Logo" />
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../faqs.html">FAQs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Contributing to Bioconda</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="setup.html">Initial Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="workflow.html">Contribution Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="building-locally.html">Testing Recipes Locally</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="build-system.html">Build system</a></li>
<li class="toctree-l2"><a class="reference internal" href="guidelines.html">Guidelines for <code class="docutils literal notranslate"><span class="pre">bioconda</span></code> recipes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Linting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#skipping-a-lint-check">Skipping a lint check</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#skipping-persistently-on-a-per-recipe-basis">Skipping persistently on a per-recipe basis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#skipping-on-a-per-commit-basis">Skipping on a per-commit basis</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lint-checks">Lint Checks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#incomplete-recipe">Incomplete Recipe</a></li>
<li class="toctree-l4"><a class="reference internal" href="#noarch-or-not-noarch">Noarch or not noarch</a></li>
<li class="toctree-l4"><a class="reference internal" href="#policy">Policy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#syntax">Syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="#recipe-parsing">Recipe Parsing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#repository">Repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="#deprecations">Deprecations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build-helpers">Build helpers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#linter-errors">Linter Errors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#developer-docs">Developer docs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="updating.html">Updating recipes</a></li>
<li class="toctree-l2"><a class="reference internal" href="updating.html#updating-recipes-for-a-pinning-change">Updating recipes for a pinning change</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
</ul>

<ul>
  
  <li class="toctree-l1"><a href="../conda-package_index.html">Browse packages</a></li>
  
  <li class="toctree-l1"><a href="https://github.com/bioconda/bioconda-recipes">Bioconda @ Github</a></li>
  
  <li class="toctree-l1"><a href="https://gitter.im/bioconda/Lobby"><img alt="Gitter" src="https://img.shields.io/gitter/room/bioconda/Lobby.svg"></a></li>
  
</ul>
<div id="searchbox" style="display: none" role="search">
    <h3 id="searchlabel">Search</h3>
    <p id="searchdesc">packages & docs</p>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div><script>
    let closest;
    // Get the last part of the URL after the # symbol - should match the div id to display
    let id = window.location.hash.substring(1);
    let elem = document.getElementById(id);
    if (elem != null) {
        // Get the closest "details" element and open it
        closest = elem.closest("details");
        if (closest) closest.open = true;
    }
</script>

    
    <div class="footer">
      &#169;2016-2024, The Bioconda Team.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.0.2</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../_sources/contributor/linting.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    <div class="git-ribbon">
      <a href="https://github.com/bioconda/bioconda-docs/edit/main/source/contributor/linting.rst" rel="me">Edit me on GitHub</a>
    </div>
  </body>
</html>